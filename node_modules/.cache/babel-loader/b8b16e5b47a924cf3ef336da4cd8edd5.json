{"ast":null,"code":"var _jsxFileName = \"/Users/igor/react/tptest/src/features/Body/Scan.js\";\nimport React, { useMemo, useState } from 'react';\nimport { Box, Chart, Keyboard, Stack, Text } from 'grommet';\nimport { calcs } from '../calcs';\n\nconst Scan = props => {\n  const [active, setActive] = useState(undefined);\n  const {\n    data,\n    max\n  } = props;\n  const values = data.map(d => [d.time, d.value]);\n  const {\n    axis,\n    bounds,\n    pad,\n    thickness\n  } = useMemo(() => calcs(values, {\n    min: 0,\n    max\n  }), [values, max]);\n  return /*#__PURE__*/React.createElement(Keyboard, {\n    onLeft: () => setActive(Math.max(0, active - 1)),\n    onRight: () => setActive(Math.min(data.length - 1, active + 1)),\n    onEsc: () => setActive(undefined),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 19,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    tabIndex: \"0\",\n    direction: \"row\",\n    margin: \"large\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 24,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    width: \"xxsmall\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    flex: true,\n    justify: \"between\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    border: \"top\",\n    align: \"end\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    pad: \"xsmall\",\n    background: {\n      color: 'white',\n      opacity: 'medium'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Text, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 19\n    }\n  }, axis[1][0]))), /*#__PURE__*/React.createElement(Box, {\n    border: \"bottom\",\n    align: \"end\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    pad: \"xsmall\",\n    background: {\n      color: 'white',\n      opacity: 'medium'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Text, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 19\n    }\n  }, axis[1][1])))), /*#__PURE__*/React.createElement(Box, {\n    height: \"xxsmall\",\n    flex: false,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Box, {\n    width: \"large\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Stack, {\n    guidingChild: \"first\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    pad: {\n      horizontal: pad\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Chart, {\n    type: \"bar\",\n    overflow: true,\n    bounds: bounds,\n    values: values,\n    thickness: thickness,\n    size: {\n      width: 'full',\n      height: 'small'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(Box, {\n    fill: true,\n    direction: \"row\",\n    justify: \"between\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 15\n    }\n  }, values.map((v, i) => /*#__PURE__*/React.createElement(Box, {\n    flex: false,\n    key: v[0],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Stack, {\n    fill: true,\n    anchor: \"center\",\n    interactiveChild: \"first\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    fill: true,\n    pad: pad,\n    background: active === i ? {\n      color: 'dark-5',\n      opacity: 'medium'\n    } : undefined,\n    onMouseOver: () => setActive(i),\n    onMouseOut: () => setActive(undefined),\n    onFocus: () => {},\n    onBlur: () => {},\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 23\n    }\n  }), active === i && /*#__PURE__*/React.createElement(Box, {\n    animation: {\n      type: 'fadeIn',\n      duration: 100\n    },\n    width: \"xsmall\",\n    pad: \"small\",\n    round: \"small\",\n    background: \"dark-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Text, {\n    size: \"large\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 27\n    }\n  }, data[active].value), /*#__PURE__*/React.createElement(Text, {\n    className: \"chromatic-ignore\",\n    size: \"small\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 27\n    }\n  }, new Date(data[active].time).toLocaleDateString()))))))), /*#__PURE__*/React.createElement(Box, {\n    height: \"xxsmall\",\n    direction: \"row\",\n    justify: \"between\",\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 13\n    }\n  }, axis[0].map(t => /*#__PURE__*/React.createElement(Text, {\n    className: \"chromatic-ignore\",\n    key: t,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 17\n    }\n  }, new Date(t).toLocaleDateString()))))));\n};\n\nexport default Scan;","map":{"version":3,"sources":["/Users/igor/react/tptest/src/features/Body/Scan.js"],"names":["React","useMemo","useState","Box","Chart","Keyboard","Stack","Text","calcs","Scan","props","active","setActive","undefined","data","max","values","map","d","time","value","axis","bounds","pad","thickness","min","Math","length","color","opacity","horizontal","width","height","v","i","type","duration","Date","toLocaleDateString","t"],"mappings":"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","sourcesContent":["import React, { useMemo, useState } from 'react';\n\nimport { Box, Chart, Keyboard, Stack, Text } from 'grommet';\n\nimport { calcs } from '../calcs';\n\nconst Scan = props => {\n  const [active, setActive] = useState(undefined);\n\n  const { data, max } = props;\n\n  const values = data.map(d => [d.time, d.value]);\n  const { axis, bounds, pad, thickness } = useMemo(\n    () => calcs(values, { min: 0, max }),\n    [values, max],\n  );\n\n  return (\n      <Keyboard\n        onLeft={() => setActive(Math.max(0, active - 1))}\n        onRight={() => setActive(Math.min(data.length - 1, active + 1))}\n        onEsc={() => setActive(undefined)}\n      >\n        <Box tabIndex=\"0\" direction=\"row\" margin=\"large\">\n          {/* y-axis */}\n          <Box width=\"xxsmall\">\n            <Box flex justify=\"between\">\n              <Box border=\"top\" align=\"end\">\n                <Box\n                  pad=\"xsmall\"\n                  background={{ color: 'white', opacity: 'medium' }}\n                >\n                  <Text>{axis[1][0]}</Text>\n                </Box>\n              </Box>\n              <Box border=\"bottom\" align=\"end\">\n                <Box\n                  pad=\"xsmall\"\n                  background={{ color: 'white', opacity: 'medium' }}\n                >\n                  <Text>{axis[1][1]}</Text>\n                </Box>\n              </Box>\n            </Box>\n            <Box height=\"xxsmall\" flex={false} />\n          </Box>\n\n          <Box width=\"large\">\n            <Stack guidingChild=\"first\">\n              <Box pad={{ horizontal: pad }}>\n                <Chart\n                  type=\"bar\"\n                  overflow\n                  bounds={bounds}\n                  values={values}\n                  thickness={thickness}\n                  size={{ width: 'full', height: 'small' }}\n                />\n              </Box>\n              <Box fill direction=\"row\" justify=\"between\">\n                {values.map((v, i) => (\n                  <Box flex={false} key={v[0]}>\n                    <Stack fill anchor=\"center\" interactiveChild=\"first\">\n                      <Box\n                        fill\n                        pad={pad}\n                        background={\n                          active === i\n                            ? { color: 'dark-5', opacity: 'medium' }\n                            : undefined\n                        }\n                        onMouseOver={() => setActive(i)}\n                        onMouseOut={() => setActive(undefined)}\n                        onFocus={() => {}}\n                        onBlur={() => {}}\n                      />\n                      {/* tip flag */}\n                      {active === i && (\n                        <Box\n                          animation={{ type: 'fadeIn', duration: 100 }}\n                          width=\"xsmall\"\n                          pad=\"small\"\n                          round=\"small\"\n                          background=\"dark-3\"\n                        >\n                          <Text size=\"large\">{data[active].value}</Text>\n                          {/* className=\"chromatic-ignore\" is used for this\n                            component testing. grommet doesn't reccomend the\n                            usage of className */}\n                          <Text className=\"chromatic-ignore\" size=\"small\">\n                            {new Date(data[active].time).toLocaleDateString()}\n                          </Text>\n                        </Box>\n                      )}\n                    </Stack>\n                  </Box>\n                ))}\n              </Box>\n            </Stack>\n\n            {/* x-axis */}\n            <Box\n              height=\"xxsmall\"\n              direction=\"row\"\n              justify=\"between\"\n              align=\"center\"\n            >\n              {axis[0].map(t => (\n                <Text className=\"chromatic-ignore\" key={t}>\n                  {new Date(t).toLocaleDateString()}\n                </Text>\n              ))}\n            </Box>\n          </Box>\n        </Box>\n      </Keyboard>\n  );\n};\n\nexport default Scan;"]},"metadata":{},"sourceType":"module"}